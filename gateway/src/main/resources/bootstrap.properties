# Spring Cloud Config
spring.application.name=${APP_NAME:gateway}
spring.config.import=optional:configserver:${CONFIG_SERVER_URL:http://localhost:8762}
spring.cloud.config.fail-fast=true
spring.cloud.config.retry.initial-interval=1000
spring.cloud.config.retry.max-attempts=6
spring.cloud.config.retry.max-interval=2000
spring.cloud.config.retry.multiplier=1.1
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# Eureka Settings
eureka.client.service-url.defaultZone=${EUREKA_SERVER_URL:http://localhost:8761/eureka/}

# RabbitMQ Settings
spring.rabbitmq.host=${RABBITMQ_HOST:localhost}
spring.rabbitmq.port=${RABBITMQ_PORT:5672}
spring.rabbitmq.username=${RABBITMQ_USERNAME:eksiclone}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:eksiclone_password}

# OAuth2 Client Configuration - Update with proper URLs and avoid hard IPs
spring.security.oauth2.client.registration.eksiclone.client-id=web-client
spring.security.oauth2.client.registration.eksiclone.client-secret=web-client-secret
spring.security.oauth2.client.registration.eksiclone.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.eksiclone.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.eksiclone.scope=openid,profile,read,write
spring.security.oauth2.client.registration.eksiclone.client-name=Eksiclone

# Use service names instead of hardcoded URLs for better service discovery
spring.security.oauth2.client.provider.eksiclone.issuer-uri=http://auth-service:8765
spring.security.oauth2.client.provider.eksiclone.authorization-uri=http://auth-service:8765/oauth2/authorize
spring.security.oauth2.client.provider.eksiclone.token-uri=http://auth-service:8765/oauth2/token
spring.security.oauth2.client.provider.eksiclone.jwk-set-uri=http://auth-service:8765/api/v1/auth/jwks.json
spring.security.oauth2.client.provider.eksiclone.user-info-uri=http://auth-service:8765/userinfo
spring.security.oauth2.client.provider.eksiclone.user-name-attribute=sub

# OAuth2 Resource Server (JWT)
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://auth-service:8765
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://auth-service:8765/api/v1/auth/jwks.json